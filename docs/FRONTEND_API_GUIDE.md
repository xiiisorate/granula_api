# ğŸ  Granula API â€” Ğ ÑƒĞºĞ¾Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾ Ğ´Ğ»Ñ Frontend-Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ°

> **Ğ’ĞµÑ€ÑĞ¸Ñ API:** v1  
> **Base URL:** `https://api.granula.raitokyokai.tech/api/v1`

---

## ğŸ“‹ Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ°Ğ½Ğ¸Ğµ

1. [ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ÑÑƒÑ‰Ğ½Ğ¾ÑÑ‚ĞµĞ¹](#Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°-ÑÑƒÑ‰Ğ½Ğ¾ÑÑ‚ĞµĞ¹)
2. [ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ](#Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ)
3. [ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ğ¹ flow](#Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ğ¹-flow)
4. [Workspaces (Ğ’Ğ¾Ñ€ĞºÑĞ¿ĞµĞ¹ÑÑ‹)](#workspaces-Ğ²Ğ¾Ñ€ĞºÑĞ¿ĞµĞ¹ÑÑ‹)
5. [Floor Plans (ĞŸĞ»Ğ°Ğ½Ñ‹ ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€)](#floor-plans-Ğ¿Ğ»Ğ°Ğ½Ñ‹-ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€)
6. [Scenes (3D Ğ¡Ñ†ĞµĞ½Ñ‹)](#scenes-3d-ÑÑ†ĞµĞ½Ñ‹)
7. [Branches (Ğ’ĞµÑ‚ĞºĞ¸/Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ñ‹)](#branches-Ğ²ĞµÑ‚ĞºĞ¸)
8. [AI Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸](#ai-Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸)
9. [Compliance (ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ½Ğ¾Ñ€Ğ¼)](#compliance-Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ°-Ğ½Ğ¾Ñ€Ğ¼)
10. [Requests (Ğ—Ğ°ÑĞ²ĞºĞ¸ ÑĞºÑĞ¿ĞµÑ€Ñ‚Ğ°Ğ¼)](#requests-Ğ·Ğ°ÑĞ²ĞºĞ¸-ÑĞºÑĞ¿ĞµÑ€Ñ‚Ğ°Ğ¼)
11. [Notifications (Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ)](#notifications-ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ)
12. [ĞšĞ¾Ğ´Ñ‹ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº](#ĞºĞ¾Ğ´Ñ‹-Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº)

---

## ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ÑÑƒÑ‰Ğ½Ğ¾ÑÑ‚ĞµĞ¹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           USER                                   â”‚
â”‚                      (ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ Ğ²Ğ»Ğ°Ğ´ĞµĞµÑ‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       WORKSPACE                                  â”‚
â”‚              (ĞšĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ğ°/ĞĞ±ÑŠĞµĞºÑ‚ Ğ½ĞµĞ´Ğ²Ğ¸Ğ¶Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸)                      â”‚
â”‚  â€¢ name, description, address                                    â”‚
â”‚  â€¢ total_area, rooms_count                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                                 â”‚
            â”‚ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚                        â”‚ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚
            â–¼                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      FLOOR PLAN       â”‚         â”‚          SCENE                â”‚
â”‚   (ĞŸĞ»Ğ°Ğ½ ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñ‹)     â”‚         â”‚    (3D Ğ¡Ñ†ĞµĞ½Ğ° Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¾Ñ€Ğ°)       â”‚
â”‚  â€¢ image Ñ„Ğ°Ğ¹Ğ»         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  â€¢ walls, rooms, openings     â”‚
â”‚  â€¢ AI Ñ€Ğ°ÑĞ¿Ğ¾Ğ·Ğ½Ğ°Ğ²Ğ°Ğ½Ğ¸Ğµ   â”‚ ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ â”‚  â€¢ furniture                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                                              â”‚ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ñ‹
                                              â–¼
                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                  â”‚          BRANCH               â”‚
                                  â”‚    (Ğ’ĞµÑ‚ĞºĞ°/Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚)            â”‚
                                  â”‚  â€¢ ĞšĞ¾Ğ¿Ğ¸Ñ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ ÑÑ†ĞµĞ½Ñ‹      â”‚
                                  â”‚  â€¢ Ğ”Ğ»Ñ ÑÑ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ñ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ğ¾Ğ²    â”‚
                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ğ’Ğ·Ğ°Ğ¸Ğ¼Ğ¾ÑĞ²ÑĞ·Ğ¸:

| Ğ¡ÑƒÑ‰Ğ½Ğ¾ÑÑ‚ÑŒ | Ğ¡Ğ²ÑĞ·ÑŒ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|----------|-------|----------|
| User â†’ Workspace | 1:N | ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¸Ğ¼ĞµÑ‚ÑŒ Ğ¼Ğ½Ğ¾Ğ³Ğ¾ Ğ²Ğ¾Ñ€ĞºÑĞ¿ĞµĞ¹ÑĞ¾Ğ² |
| Workspace â†’ Floor Plan | 1:N | Ğ’ Ğ²Ğ¾Ñ€ĞºÑĞ¿ĞµĞ¹ÑĞµ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ğ»Ğ°Ğ½Ğ¾Ğ² (ÑÑ‚Ğ°Ğ¶Ğ¸) |
| Workspace â†’ Scene | 1:N | Ğ’ Ğ²Ğ¾Ñ€ĞºÑĞ¿ĞµĞ¹ÑĞµ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ 3D ÑÑ†ĞµĞ½ |
| Floor Plan â†’ Scene | 1:1 | Ğ˜Ğ· Ğ¿Ğ»Ğ°Ğ½Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ÑÑ Ğ¾Ğ´Ğ½Ğ° ÑÑ†ĞµĞ½Ğ° (Ğ¿Ğ¾ÑĞ»Ğµ Ñ€Ğ°ÑĞ¿Ğ¾Ğ·Ğ½Ğ°Ğ²Ğ°Ğ½Ğ¸Ñ) |
| Scene â†’ Branch | 1:N | Ğ¡Ñ†ĞµĞ½Ğ° Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¸Ğ¼ĞµÑ‚ÑŒ Ğ¼Ğ½Ğ¾Ğ³Ğ¾ Ğ²ĞµÑ‚Ğ¾Ğº-Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ğ¾Ğ² |
| Workspace â†’ Request | 1:N | ĞĞ° Ğ²Ğ¾Ñ€ĞºÑĞ¿ĞµĞ¹Ñ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ·Ğ°ÑĞ²ĞºÑƒ ÑĞºÑĞ¿ĞµÑ€Ñ‚Ñƒ |

---

## ğŸ” ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ

Ğ’ÑĞµ Ğ·Ğ°Ñ‰Ğ¸Ñ‰Ñ‘Ğ½Ğ½Ñ‹Ğµ ÑĞ½Ğ´Ğ¿Ğ¾Ğ¸Ğ½Ñ‚Ñ‹ Ñ‚Ñ€ĞµĞ±ÑƒÑÑ‚ JWT Ñ‚Ğ¾ĞºĞµĞ½ Ğ² Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞµ:

```http
Authorization: Bearer <access_token>
```

### Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ

```http
POST /auth/register
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "SecurePass123!",
  "name": "Ğ˜Ğ²Ğ°Ğ½ Ğ˜Ğ²Ğ°Ğ½Ğ¾Ğ²"
}
```

**ĞÑ‚Ğ²ĞµÑ‚:**
```json
{
  "data": {
    "user_id": "uuid",
    "access_token": "eyJhbGciOiJIUzI1NiIs...",
    "refresh_token": "eyJhbGciOiJIUzI1NiIs...",
    "expires_in": 900
  },
  "message": "Registration successful"
}
```

### Ğ›Ğ¾Ğ³Ğ¸Ğ½

```http
POST /auth/login
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "SecurePass123!"
}
```

### ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¾ĞºĞµĞ½Ğ°

```http
POST /auth/refresh
Content-Type: application/json

{
  "refresh_token": "eyJhbGciOiJIUzI1NiIs..."
}
```

### Ğ’Ñ‹Ñ…Ğ¾Ğ´

```http
POST /auth/logout
Authorization: Bearer <token>
```

### Ğ’Ñ‹Ñ…Ğ¾Ğ´ ÑĞ¾ Ğ²ÑĞµÑ… ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²

```http
POST /auth/logout-all
Authorization: Bearer <token>
```

---

## ğŸ”„ ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ğ¹ Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. Ğ Ğ•Ğ“Ğ˜Ğ¡Ğ¢Ğ ĞĞ¦Ğ˜Ğ¯/Ğ›ĞĞ“Ğ˜Ğ                                                â”‚
â”‚     POST /auth/register Ğ¸Ğ»Ğ¸ POST /auth/login                         â”‚
â”‚     â†’ ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ access_token                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. Ğ¡ĞĞ—Ğ”ĞĞĞ˜Ğ• Ğ’ĞĞ ĞšĞ¡ĞŸĞ•Ğ™Ğ¡Ğ                                              â”‚
â”‚     POST /workspaces                                                 â”‚
â”‚     â†’ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ "ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñƒ" Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. Ğ—ĞĞ“Ğ Ğ£Ğ—ĞšĞ ĞŸĞ›ĞĞĞ ĞšĞ’ĞĞ Ğ¢Ğ˜Ğ Ğ«                                          â”‚
â”‚     POST /floor-plans (multipart/form-data)                          â”‚
â”‚     â†’ Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµĞ¼ Ñ„Ğ¾Ñ‚Ğ¾/ÑĞºĞ°Ğ½ Ğ¿Ğ»Ğ°Ğ½Ğ° Ğ¸Ğ· Ğ‘Ğ¢Ğ˜                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. AI Ğ ĞĞ¡ĞŸĞĞ—ĞĞĞ’ĞĞĞ˜Ğ•                                                 â”‚
â”‚     POST /ai/recognize â†’ GET /ai/recognize/{job_id}/status           â”‚
â”‚     â†’ AI Ñ€Ğ°ÑĞ¿Ğ¾Ğ·Ğ½Ğ°Ñ‘Ñ‚ ÑÑ‚ĞµĞ½Ñ‹, ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ñ‹, Ğ¾ĞºĞ½Ğ°, Ğ´Ğ²ĞµÑ€Ğ¸                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. Ğ¡ĞĞ—Ğ”ĞĞĞ˜Ğ• 3D Ğ¡Ğ¦Ğ•ĞĞ«                                                â”‚
â”‚     POST /workspaces/{id}/scenes                                     â”‚
â”‚     â†’ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€ÑƒĞµĞ¼ÑƒÑ 3D ÑÑ†ĞµĞ½Ñƒ Ğ¸Ğ· Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ° Ñ€Ğ°ÑĞ¿Ğ¾Ğ·Ğ½Ğ°Ğ²Ğ°Ğ½Ğ¸Ñ     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  6. Ğ Ğ•Ğ”ĞĞšĞ¢Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ• Ğ˜ Ğ ĞĞ‘ĞĞ¢Ğ Ğ¡ AI                                     â”‚
â”‚     â€¢ POST /ai/chat â€” ĞºĞ¾Ğ½ÑÑƒĞ»ÑŒÑ‚Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾ Ğ¿ĞµÑ€ĞµĞ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞµ                 â”‚
â”‚     â€¢ POST /ai/generate â€” Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ğ¾Ğ²                        â”‚
â”‚     â€¢ POST /compliance/check â€” Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ½Ğ° ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²Ğ¸Ğµ Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ¼       â”‚
â”‚     â€¢ POST /scenes/{id}/branches â€” ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ²ĞµÑ‚Ğ¾Ğº-Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ğ¾Ğ²          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  7. Ğ—ĞĞ¯Ğ’ĞšĞ Ğ­ĞšĞ¡ĞŸĞ•Ğ Ğ¢Ğ£                                                  â”‚
â”‚     POST /requests                                                   â”‚
â”‚     â†’ ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ·Ğ°ÑĞ²ĞºÑƒ Ğ½Ğ° ĞºĞ¾Ğ½ÑÑƒĞ»ÑŒÑ‚Ğ°Ñ†Ğ¸Ñ/ÑĞ¾Ğ³Ğ»Ğ°ÑĞ¾Ğ²Ğ°Ğ½Ğ¸Ğµ                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¢ Workspaces (Ğ’Ğ¾Ñ€ĞºÑĞ¿ĞµĞ¹ÑÑ‹)

Ğ’Ğ¾Ñ€ĞºÑĞ¿ĞµĞ¹Ñ = Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ°Ñ ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ğ°/Ğ¾Ğ±ÑŠĞµĞºÑ‚ Ğ½ĞµĞ´Ğ²Ğ¸Ğ¶Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸.

### Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ²Ğ¾Ñ€ĞºÑĞ¿ĞµĞ¹Ñ

```http
POST /workspaces
Authorization: Bearer <token>
Content-Type: application/json

{
  "name": "ĞšĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ğ° Ğ½Ğ° Ğ›ĞµĞ½Ğ¸Ğ½Ğ° 15",
  "description": "Ğ”Ğ²ÑƒÑ…ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ğ½Ğ°Ñ ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ğ° 54Ğ¼Â²",
  "address": "Ğ³. ĞœĞ¾ÑĞºĞ²Ğ°, ÑƒĞ». Ğ›ĞµĞ½Ğ¸Ğ½Ğ°, Ğ´. 15, ĞºĞ². 42",
  "total_area": 54.5,
  "rooms_count": 2
}
```

**ĞÑ‚Ğ²ĞµÑ‚:**
```json
{
  "data": {
    "id": "uuid",
    "name": "ĞšĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ğ° Ğ½Ğ° Ğ›ĞµĞ½Ğ¸Ğ½Ğ° 15",
    "description": "Ğ”Ğ²ÑƒÑ…ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ğ½Ğ°Ñ ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ğ° 54Ğ¼Â²",
    "address": "Ğ³. ĞœĞ¾ÑĞºĞ²Ğ°, ÑƒĞ». Ğ›ĞµĞ½Ğ¸Ğ½Ğ°, Ğ´. 15, ĞºĞ². 42",
    "total_area": 54.5,
    "rooms_count": 2,
    "owner_id": "user-uuid",
    "created_at": "2024-01-15T10:30:00Z",
    "updated_at": "2024-01-15T10:30:00Z"
  }
}
```

### Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ²Ğ¾Ñ€ĞºÑĞ¿ĞµĞ¹ÑĞ¾Ğ²

```http
GET /workspaces
GET /workspaces?page=1&limit=20&search=Ğ›ĞµĞ½Ğ¸Ğ½Ğ°
Authorization: Bearer <token>
```

### ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ²Ğ¾Ñ€ĞºÑĞ¿ĞµĞ¹Ñ

```http
GET /workspaces/{workspace_id}
Authorization: Bearer <token>
```

### ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ²Ğ¾Ñ€ĞºÑĞ¿ĞµĞ¹Ñ

```http
PATCH /workspaces/{workspace_id}
Authorization: Bearer <token>
Content-Type: application/json

{
  "name": "ĞĞ¾Ğ²Ğ¾Ğµ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ",
  "description": "ĞĞ¾Ğ²Ğ¾Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ"
}
```

### Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ²Ğ¾Ñ€ĞºÑĞ¿ĞµĞ¹Ñ

```http
DELETE /workspaces/{workspace_id}
Authorization: Bearer <token>
```

---

## ğŸ—ºï¸ Floor Plans (ĞŸĞ»Ğ°Ğ½Ñ‹ ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€)

### Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Ğ¿Ğ»Ğ°Ğ½ (multipart/form-data!)

```http
POST /floor-plans
Authorization: Bearer <token>
Content-Type: multipart/form-data

file: <binary image>
workspace_id: "workspace-uuid"
name: "ĞŸĞ»Ğ°Ğ½ Ğ¸Ğ· Ğ‘Ğ¢Ğ˜"
```

**ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ğµ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ñ‹:** JPEG, PNG, PDF

**ĞÑ‚Ğ²ĞµÑ‚:**
```json
{
  "data": {
    "id": "floor-plan-uuid",
    "workspace_id": "workspace-uuid",
    "name": "ĞŸĞ»Ğ°Ğ½ Ğ¸Ğ· Ğ‘Ğ¢Ğ˜",
    "status": "uploaded",
    "file_url": "https://...",
    "created_at": "2024-01-15T10:35:00Z"
  }
}
```

### Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¿Ğ»Ğ°Ğ½Ğ¾Ğ²

```http
GET /floor-plans?workspace_id={workspace_id}
Authorization: Bearer <token>
```

### ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¿Ğ»Ğ°Ğ½

```http
GET /floor-plans/{floor_plan_id}
Authorization: Bearer <token>
```

### Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ¿Ğ»Ğ°Ğ½

```http
DELETE /floor-plans/{floor_plan_id}
Authorization: Bearer <token>
```

---

## ğŸ® Scenes (3D Ğ¡Ñ†ĞµĞ½Ñ‹)

Ğ¡Ñ†ĞµĞ½Ğ° â€” ÑÑ‚Ğ¾ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾Ğµ 3D Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñ‹.

### Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑÑ†ĞµĞ½Ñƒ

```http
POST /workspaces/{workspace_id}/scenes
Authorization: Bearer <token>
Content-Type: application/json

{
  "name": "ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°",
  "description": "Ğ¡Ñ†ĞµĞ½Ğ° Ğ¸Ğ· Ğ¿Ğ»Ğ°Ğ½Ğ° Ğ‘Ğ¢Ğ˜",
  "floor_plan_id": "floor-plan-uuid"
}
```

**ĞÑ‚Ğ²ĞµÑ‚:**
```json
{
  "data": {
    "id": "scene-uuid",
    "workspace_id": "workspace-uuid",
    "name": "ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°",
    "floor_plan_id": "floor-plan-uuid",
    "main_branch_id": "branch-uuid",
    "created_at": "2024-01-15T10:40:00Z"
  }
}
```

### ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑÑ†ĞµĞ½Ñƒ

> âš ï¸ **Ğ’ĞĞ–ĞĞ:** ĞŸÑƒÑ‚ÑŒ `/scenes/{scene_id}`, Ğ° ĞĞ• `/workspaces/{id}/scenes/{scene_id}`!

```http
GET /scenes/{scene_id}
Authorization: Bearer <token>
```

**ĞÑ‚Ğ²ĞµÑ‚ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚:**
- `walls` â€” Ğ¼Ğ°ÑÑĞ¸Ğ² ÑÑ‚ĞµĞ½ Ñ ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ğ°Ğ¼Ğ¸
- `rooms` â€” Ğ¼Ğ°ÑÑĞ¸Ğ² ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚ (ĞºÑƒÑ…Ğ½Ñ, Ğ³Ğ¾ÑÑ‚Ğ¸Ğ½Ğ°Ñ Ğ¸ Ñ‚.Ğ´.)
- `openings` â€” Ğ´Ğ²ĞµÑ€Ğ¸ Ğ¸ Ğ¾ĞºĞ½Ğ°
- `furniture` â€” Ñ€Ğ°ÑÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ½Ğ°Ñ Ğ¼ĞµĞ±ĞµĞ»ÑŒ

### ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ÑÑ†ĞµĞ½Ñƒ

```http
PATCH /scenes/{scene_id}
Authorization: Bearer <token>
Content-Type: application/json

{
  "name": "ĞĞ¾Ğ²Ğ¾Ğµ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ",
  "walls": [...],
  "rooms": [...],
  "furniture": [...]
}
```

### Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ ÑÑ†ĞµĞ½Ñƒ

```http
DELETE /scenes/{scene_id}
Authorization: Bearer <token>
```

---

## ğŸŒ¿ Branches (Ğ’ĞµÑ‚ĞºĞ¸)

Ğ’ĞµÑ‚ĞºĞ¸ Ğ¿Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑÑÑ‚ ÑĞ¾Ğ·Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ñ‹ Ğ¿ĞµÑ€ĞµĞ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸ Ğ´Ğ»Ñ ÑÑ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ñ.

### Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ²ĞµÑ‚Ğ¾Ğº ÑÑ†ĞµĞ½Ñ‹

```http
GET /scenes/{scene_id}/branches
Authorization: Bearer <token>
```

### Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ²ĞµÑ‚ĞºÑƒ

```http
POST /scenes/{scene_id}/branches
Authorization: Bearer <token>
Content-Type: application/json

{
  "name": "Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ Ñ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¾Ğ¹ ĞºÑƒÑ…Ğ½ĞµĞ¹",
  "description": "ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ ĞºÑƒÑ…Ğ½Ğ¸ Ğ¸ Ğ³Ğ¾ÑÑ‚Ğ¸Ğ½Ğ¾Ğ¹"
}
```

**ĞÑ‚Ğ²ĞµÑ‚:**
```json
{
  "data": {
    "id": "branch-uuid",
    "scene_id": "scene-uuid",
    "name": "Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ Ñ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¾Ğ¹ ĞºÑƒÑ…Ğ½ĞµĞ¹",
    "is_active": false,
    "created_at": "2024-01-15T11:00:00Z"
  }
}
```

### ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ²ĞµÑ‚ĞºÑƒ

```http
GET /scenes/{scene_id}/branches/{branch_id}
Authorization: Bearer <token>
```

### ĞĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ²ĞµÑ‚ĞºÑƒ (Ğ¿ĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒÑÑ)

```http
POST /scenes/{scene_id}/branches/{branch_id}/activate
Authorization: Bearer <token>
```

### Ğ¡Ñ€Ğ°Ğ²Ğ½Ğ¸Ñ‚ÑŒ Ğ²ĞµÑ‚ĞºĞ¸

```http
GET /scenes/{scene_id}/branches/{branch_id}/compare/{target_branch_id}
Authorization: Bearer <token>
```

### ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½Ğ¸Ñ‚ÑŒ Ğ²ĞµÑ‚ĞºĞ¸

```http
POST /scenes/{scene_id}/branches/{branch_id}/merge
Authorization: Bearer <token>
Content-Type: application/json

{
  "target_branch_id": "target-branch-uuid"
}
```

### Ğ”ÑƒĞ±Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ²ĞµÑ‚ĞºÑƒ

```http
POST /scenes/{scene_id}/branches/{branch_id}/duplicate
Authorization: Bearer <token>
```

### Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ²ĞµÑ‚ĞºÑƒ

```http
DELETE /scenes/{scene_id}/branches/{branch_id}
Authorization: Bearer <token>
```

---

## ğŸ¤– AI Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸

### 1. Ğ Ğ°ÑĞ¿Ğ¾Ğ·Ğ½Ğ°Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ»Ğ°Ğ½Ğ° (Vision AI)

**Ğ—Ğ°Ğ¿ÑƒÑĞº Ñ€Ğ°ÑĞ¿Ğ¾Ğ·Ğ½Ğ°Ğ²Ğ°Ğ½Ğ¸Ñ:**
```http
POST /ai/recognize
Authorization: Bearer <token>
Content-Type: application/json

{
  "floor_plan_id": "floor-plan-uuid",
  "image_base64": "data:image/jpeg;base64,/9j/4AAQSkZJRg...",
  "image_type": "image/jpeg",
  "options": {
    "detect_load_bearing": true,
    "detect_wet_zones": true,
    "detect_furniture": false
  }
}
```

**ĞÑ‚Ğ²ĞµÑ‚:**
```json
{
  "data": {
    "job_id": "job-uuid",
    "status": "processing"
  }
}
```

**ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑÑ‚Ğ°Ñ‚ÑƒÑĞ° (polling):**
```http
GET /ai/recognize/{job_id}/status
Authorization: Bearer <token>
```

**ĞÑ‚Ğ²ĞµÑ‚ Ğ¿Ñ€Ğ¸ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¸Ğ¸:**
```json
{
  "data": {
    "status": "completed",
    "progress": 100,
    "result": {
      "walls": [
        {"id": "w1", "start": {"x": 0, "y": 0}, "end": {"x": 500, "y": 0}, "is_load_bearing": true}
      ],
      "rooms": [
        {"id": "r1", "name": "ĞšÑƒÑ…Ğ½Ñ", "area": 12.5, "type": "kitchen"}
      ],
      "openings": [
        {"id": "o1", "type": "door", "wall_id": "w1", "width": 90}
      ]
    }
  }
}
```

### 2. AI Ğ§Ğ°Ñ‚ (ĞšĞ¾Ğ½ÑÑƒĞ»ÑŒÑ‚Ğ°Ñ†Ğ¸Ğ¸)

**ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ:**
```http
POST /ai/chat
Authorization: Bearer <token>
Content-Type: application/json

{
  "message": "ĞœĞ¾Ğ¶Ğ½Ğ¾ Ğ»Ğ¸ ÑĞ½ĞµÑÑ‚Ğ¸ ÑÑ‚ĞµĞ½Ñƒ Ğ¼ĞµĞ¶Ğ´Ñƒ ĞºÑƒÑ…Ğ½ĞµĞ¹ Ğ¸ Ğ³Ğ¾ÑÑ‚Ğ¸Ğ½Ğ¾Ğ¹?",
  "scene_id": "scene-uuid",
  "context_id": "previous-context-uuid"
}
```

**ĞÑ‚Ğ²ĞµÑ‚:**
```json
{
  "data": {
    "response": "Ğ¡Ğ½Ğ¾Ñ ÑÑ‚ĞµĞ½Ñ‹ Ğ¼ĞµĞ¶Ğ´Ñƒ ĞºÑƒÑ…Ğ½ĞµĞ¹ Ğ¸ Ğ³Ğ¾ÑÑ‚Ğ¸Ğ½Ğ¾Ğ¹ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶ĞµĞ½, ĞµÑĞ»Ğ¸ Ğ¾Ğ½Ğ° Ğ½Ğµ ÑĞ²Ğ»ÑĞµÑ‚ÑÑ Ğ½ĞµÑÑƒÑ‰ĞµĞ¹. ĞĞ´Ğ½Ğ°ĞºĞ¾, ĞµÑĞ»Ğ¸ ĞºÑƒÑ…Ğ½Ñ Ğ³Ğ°Ğ·Ğ¸Ñ„Ğ¸Ñ†Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ°, Ğ¿Ğ¾ Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ¼ Ğ¡ĞĞ¸ĞŸ 31-01-2003 Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ñ€Ğ°Ğ·Ğ´Ğ²Ğ¸Ğ¶Ğ½ÑƒÑ Ğ¿ĞµÑ€ĞµĞ³Ğ¾Ñ€Ğ¾Ğ´ĞºÑƒ Ğ¸Ğ»Ğ¸ Ğ·Ğ°Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ³Ğ°Ğ·Ğ¾Ğ²ÑƒÑ Ğ¿Ğ»Ğ¸Ñ‚Ñƒ Ğ½Ğ° ÑĞ»ĞµĞºÑ‚Ñ€Ğ¸Ñ‡ĞµÑĞºÑƒÑ...",
    "context_id": "new-context-uuid",
    "suggestions": [
      "ĞšĞ°Ğº ÑƒĞ·Ğ½Ğ°Ñ‚ÑŒ, Ğ½ĞµÑÑƒÑ‰Ğ°Ñ Ğ»Ğ¸ ÑÑ‚ĞµĞ½Ğ°?",
      "ĞšĞ°ĞºĞ¸Ğµ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ñ‹ Ğ½ÑƒĞ¶Ğ½Ñ‹ Ğ´Ğ»Ñ ÑĞ¾Ğ³Ğ»Ğ°ÑĞ¾Ğ²Ğ°Ğ½Ğ¸Ñ?"
    ]
  }
}
```

**Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ñ‡Ğ°Ñ‚Ğ°:**
```http
GET /ai/chat/history?scene_id={scene_id}&limit=50
Authorization: Bearer <token>
```

### 3. Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ğ¾Ğ² Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸

**Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸:**
```http
POST /ai/generate
Authorization: Bearer <token>
Content-Type: application/json

{
  "scene_id": "scene-uuid",
  "prompt": "ĞŸÑ€ĞµĞ´Ğ»Ğ¾Ğ¶Ğ¸ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ñ‹ Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ñ ĞºÑƒÑ…Ğ½Ğ¸ Ñ Ğ³Ğ¾ÑÑ‚Ğ¸Ğ½Ğ¾Ğ¹",
  "variants_count": 3,
  "preserve_load_bearing": true,
  "check_compliance": true
}
```

**ĞÑ‚Ğ²ĞµÑ‚:**
```json
{
  "data": {
    "job_id": "generation-job-uuid",
    "status": "processing"
  }
}
```

**ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑÑ‚Ğ°Ñ‚ÑƒÑĞ°:**
```http
GET /ai/generate/{job_id}/status
Authorization: Bearer <token>
```

**ĞÑ‚Ğ²ĞµÑ‚ Ğ¿Ñ€Ğ¸ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¸Ğ¸:**
```json
{
  "data": {
    "status": "completed",
    "variants": [
      {
        "id": "v1",
        "name": "ĞÑ‚ĞºÑ€Ñ‹Ñ‚Ğ°Ñ ĞºÑƒÑ…Ğ½Ñ-Ğ³Ğ¾ÑÑ‚Ğ¸Ğ½Ğ°Ñ",
        "description": "ĞŸĞ¾Ğ»Ğ½Ğ¾Ğµ Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ÑÑ‚Ğ²Ğ°",
        "changes": {
          "walls_removed": ["w3"],
          "walls_added": []
        },
        "compliance": {
          "is_compliant": true,
          "violations": []
        }
      },
      {
        "id": "v2", 
        "name": "ĞšÑƒÑ…Ğ½Ñ Ñ Ğ±Ğ°Ñ€Ğ½Ğ¾Ğ¹ ÑÑ‚Ğ¾Ğ¹ĞºĞ¾Ğ¹",
        "description": "Ğ§Ğ°ÑÑ‚Ğ¸Ñ‡Ğ½Ğ¾Ğµ Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ Ñ Ğ·Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼",
        "changes": {...}
      }
    ]
  }
}
```

### 4. Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ğ° (ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ²ĞµÑ‚ĞºĞ¸ Ğ¸Ğ· AI-Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ)

```http
POST /scenes/{scene_id}/chat/messages/{message_id}/select
Authorization: Bearer <token>
Content-Type: application/json

{
  "suggestion_index": 0
}
```

### 5. ĞšĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ AI

**ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚:**
```http
GET /ai/context?scene_id={scene_id}
Authorization: Bearer <token>
```

**ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ (Ñ„Ğ¾Ñ€ÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºÑƒ):**
```http
POST /ai/context
Authorization: Bearer <token>
Content-Type: application/json

{
  "scene_id": "scene-uuid",
  "force": true
}
```

---

## âœ… Compliance (ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ½Ğ¾Ñ€Ğ¼)

### ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²ĞºÑƒ Ğ½Ğ° ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²Ğ¸Ğµ Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ¼

```http
POST /compliance/check
Authorization: Bearer <token>
Content-Type: application/json

{
  "scene_id": "scene-uuid"
}
```

**ĞÑ‚Ğ²ĞµÑ‚:**
```json
{
  "data": {
    "compliant": false,
    "violations": [
      {
        "rule_code": "SNIP-31-01-2003-9.22",
        "rule_name": "Ğ“Ğ°Ğ·Ğ¸Ñ„Ğ¸Ñ†Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ ĞºÑƒÑ…Ğ½Ñ",
        "severity": "critical",
        "description": "ĞšÑƒÑ…Ğ½Ñ Ñ Ğ³Ğ°Ğ·Ğ¾Ğ²Ğ¾Ğ¹ Ğ¿Ğ»Ğ¸Ñ‚Ğ¾Ğ¹ Ğ½Ğµ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ° Ñ Ğ¶Ğ¸Ğ»Ğ¾Ğ¹ ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ğ¾Ğ¹ Ğ±ĞµĞ· ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ¸ Ğ¿ĞµÑ€ĞµĞ³Ğ¾Ñ€Ğ¾Ğ´ĞºĞ¸",
        "recommendation": "Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ Ñ€Ğ°Ğ·Ğ´Ğ²Ğ¸Ğ¶Ğ½ÑƒÑ Ğ¿ĞµÑ€ĞµĞ³Ğ¾Ñ€Ğ¾Ğ´ĞºÑƒ Ğ¸Ğ»Ğ¸ Ğ·Ğ°Ğ¼ĞµĞ½Ğ¸Ñ‚Ğµ Ğ³Ğ°Ğ·Ğ¾Ğ²ÑƒÑ Ğ¿Ğ»Ğ¸Ñ‚Ñƒ Ğ½Ğ° ÑĞ»ĞµĞºÑ‚Ñ€Ğ¸Ñ‡ĞµÑĞºÑƒÑ"
      }
    ],
    "warnings": [
      {
        "rule_code": "SP-54-MIN-LIVING",
        "description": "ĞŸĞ»Ğ¾Ñ‰Ğ°Ğ´ÑŒ Ğ¶Ğ¸Ğ»Ğ¾Ğ¹ ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ñ‹ Ğ±Ğ»Ğ¸Ğ·ĞºĞ° Ğº Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾ Ğ´Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ğ¼Ğ¾Ğ¹ (8Ğ¼Â²)"
      }
    ]
  }
}
```

### ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ²ÑĞµÑ… Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»

```http
GET /compliance/rules
GET /compliance/rules?category=kitchen&severity=critical
Authorization: Bearer <token>
```

**ĞÑ‚Ğ²ĞµÑ‚:**
```json
{
  "data": {
    "rules": [
      {
        "code": "SNIP-31-01-2003-9.22",
        "name": "Ğ“Ğ°Ğ·Ğ¸Ñ„Ğ¸Ñ†Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ ĞºÑƒÑ…Ğ½Ñ",
        "category": "kitchen",
        "severity": "critical",
        "description": "Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğº ĞºÑƒÑ…Ğ½ÑĞ¼ Ñ Ğ³Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¼ Ğ¾Ğ±Ğ¾Ñ€ÑƒĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼",
        "source": "Ğ¡ĞĞ¸ĞŸ 31-01-2003"
      }
    ]
  }
}
```

---

## ğŸ“ Requests (Ğ—Ğ°ÑĞ²ĞºĞ¸ ÑĞºÑĞ¿ĞµÑ€Ñ‚Ğ°Ğ¼)

### Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ·Ğ°ÑĞ²ĞºÑƒ

```http
POST /requests
Authorization: Bearer <token>
Content-Type: application/json

{
  "workspace_id": "workspace-uuid",
  "title": "ĞšĞ¾Ğ½ÑÑƒĞ»ÑŒÑ‚Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ğ¿ĞµÑ€ĞµĞ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞµ",
  "description": "ĞÑƒĞ¶Ğ½Ğ° ĞºĞ¾Ğ½ÑÑƒĞ»ÑŒÑ‚Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ñ ĞºÑƒÑ…Ğ½Ğ¸ Ñ Ğ³Ğ¾ÑÑ‚Ğ¸Ğ½Ğ¾Ğ¹",
  "category": "consultation",
  "priority": "normal",
  "contact": {
    "name": "Ğ˜Ğ²Ğ°Ğ½ Ğ˜Ğ²Ğ°Ğ½Ğ¾Ğ²",
    "phone": "+7 999 123 4567",
    "email": "ivan@example.com"
  }
}
```

**ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸ (`category`):**
- `consultation` â€” ĞšĞ¾Ğ½ÑÑƒĞ»ÑŒÑ‚Ğ°Ñ†Ğ¸Ñ (Ğ¾Ñ‚ 2000â‚½)
- `verification` â€” ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸
- `project` â€” Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
- `approval` â€” Ğ¡Ğ¾Ğ³Ğ»Ğ°ÑĞ¾Ğ²Ğ°Ğ½Ğ¸Ğµ (Ğ¾Ñ‚ 15000â‚½)

**ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚Ñ‹ (`priority`):**
- `low` â€” ĞĞ¸Ğ·ĞºĞ¸Ğ¹
- `normal` â€” ĞĞ±Ñ‹Ñ‡Ğ½Ñ‹Ğ¹
- `high` â€” Ğ’Ñ‹ÑĞ¾ĞºĞ¸Ğ¹
- `urgent` â€” Ğ¡Ñ€Ğ¾Ñ‡Ğ½Ñ‹Ğ¹

**ĞÑ‚Ğ²ĞµÑ‚:**
```json
{
  "data": {
    "id": "request-uuid",
    "status": "pending",
    "estimated_cost": 2000,
    "created_at": "2024-01-15T12:00:00Z"
  }
}
```

### Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ·Ğ°ÑĞ²Ğ¾Ğº

```http
GET /requests
GET /requests?workspace_id={id}&status=pending
Authorization: Bearer <token>
```

### ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ·Ğ°ÑĞ²ĞºÑƒ

```http
GET /requests/{request_id}
Authorization: Bearer <token>
```

### ĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ·Ğ°ÑĞ²ĞºÑƒ

```http
POST /requests/{request_id}/cancel
Authorization: Bearer <token>
Content-Type: application/json

{
  "reason": "ĞŸĞµÑ€ĞµĞ´ÑƒĞ¼Ğ°Ğ»"
}
```

---

## ğŸ”” Notifications (Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ)

### Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹

```http
GET /notifications
GET /notifications?unread_only=true&limit=20
Authorization: Bearer <token>
```

**ĞÑ‚Ğ²ĞµÑ‚:**
```json
{
  "data": {
    "notifications": [
      {
        "id": "notif-uuid",
        "type": "request_status_changed",
        "title": "Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ·Ğ°ÑĞ²ĞºĞ¸ Ğ¸Ğ·Ğ¼ĞµĞ½Ñ‘Ğ½",
        "message": "Ğ’Ğ°ÑˆĞ° Ğ·Ğ°ÑĞ²ĞºĞ° Ğ¿Ñ€Ğ¸Ğ½ÑÑ‚Ğ° Ğ² Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñƒ",
        "read": false,
        "created_at": "2024-01-15T14:00:00Z"
      }
    ]
  }
}
```

### ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ½ĞµĞ¿Ñ€Ğ¾Ñ‡Ğ¸Ñ‚Ğ°Ğ½Ğ½Ñ‹Ñ…

```http
GET /notifications/count
Authorization: Bearer <token>
```

### ĞÑ‚Ğ¼ĞµÑ‚Ğ¸Ñ‚ÑŒ ĞºĞ°Ğº Ğ¿Ñ€Ğ¾Ñ‡Ğ¸Ñ‚Ğ°Ğ½Ğ½Ğ¾Ğµ

```http
POST /notifications/{id}/read
Authorization: Bearer <token>
```

### ĞÑ‚Ğ¼ĞµÑ‚Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ ĞºĞ°Ğº Ğ¿Ñ€Ğ¾Ñ‡Ğ¸Ñ‚Ğ°Ğ½Ğ½Ñ‹Ğµ

```http
POST /notifications/read-all
Authorization: Bearer <token>
```

### Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ

```http
DELETE /notifications/{id}
Authorization: Bearer <token>
```

---

## ğŸ‘¤ User Profile (ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ)

### ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ

```http
GET /users/me
Authorization: Bearer <token>
```

**ĞÑ‚Ğ²ĞµÑ‚:**
```json
{
  "data": {
    "id": "user-uuid",
    "email": "user@example.com",
    "name": "Ğ˜Ğ²Ğ°Ğ½ Ğ˜Ğ²Ğ°Ğ½Ğ¾Ğ²",
    "phone": "+7 999 123 4567",
    "avatar_url": "https://...",
    "created_at": "2024-01-01T00:00:00Z"
  }
}
```

### ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ

```http
PATCH /users/me
Authorization: Bearer <token>
Content-Type: application/json

{
  "name": "ĞĞ¾Ğ²Ğ¾Ğµ Ğ˜Ğ¼Ñ",
  "phone": "+7 999 999 9999"
}
```

---

## âŒ ĞšĞ¾Ğ´Ñ‹ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº

| HTTP Code | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ |
|-----------|----------|--------|
| `400` | ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ | ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒĞµÑ‚ Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğµ Ğ¿Ğ¾Ğ»Ğµ |
| `401` | ĞĞµ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½ | ĞĞµĞ²Ğ°Ğ»Ğ¸Ğ´Ğ½Ñ‹Ğ¹ Ğ¸Ğ»Ğ¸ Ğ¸ÑÑ‚Ñ‘ĞºÑˆĞ¸Ğ¹ Ñ‚Ğ¾ĞºĞµĞ½ |
| `403` | Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ Ğ·Ğ°Ğ¿Ñ€ĞµÑ‰Ñ‘Ğ½ | ĞĞµÑ‚ Ğ¿Ñ€Ğ°Ğ² Ğ½Ğ° Ñ€ĞµÑÑƒÑ€Ñ |
| `404` | ĞĞµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾ | Ğ ĞµÑÑƒÑ€Ñ Ğ½Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚ |
| `409` | ĞšĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚ | Email ÑƒĞ¶Ğµ Ğ·Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½ |
| `422` | ĞÑˆĞ¸Ğ±ĞºĞ° Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸ | ĞĞµĞ²Ğ°Ğ»Ğ¸Ğ´Ğ½Ñ‹Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ email |
| `429` | Ğ¡Ğ»Ğ¸ÑˆĞºĞ¾Ğ¼ Ğ¼Ğ½Ğ¾Ğ³Ğ¾ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² | Rate limit Ğ¿Ñ€ĞµĞ²Ñ‹ÑˆĞµĞ½ |
| `500` | Ğ’Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½ÑÑ Ğ¾ÑˆĞ¸Ğ±ĞºĞ° | ĞÑˆĞ¸Ğ±ĞºĞ° ÑĞµÑ€Ğ²ĞµÑ€Ğ° |

**Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸:**
```json
{
  "error": "unauthorized",
  "message": "Token has expired",
  "request_id": "uuid-for-debugging"
}
```

---

## ğŸ“± Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ»Ñ Frontend

### 1. Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ²
- `access_token` â€” Ğ² Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸ Ğ¸Ğ»Ğ¸ sessionStorage (ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¾Ğ¶Ğ¸Ğ²ÑƒÑ‰Ğ¸Ğ¹)
- `refresh_token` â€” Ğ² httpOnly cookie Ğ¸Ğ»Ğ¸ secure storage

### 2. ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¾ĞºĞµĞ½Ğ°
- ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞ¹Ñ‚Ğµ `expires_in` Ğ¸ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞ¹Ñ‚Ğµ Ñ‚Ğ¾ĞºĞµĞ½ Ğ·Ğ°Ñ€Ğ°Ğ½ĞµĞµ
- ĞŸÑ€Ğ¸ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğ¸ `401` â€” Ğ¿Ğ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ refresh, Ğ¿Ñ€Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞµ â€” logout

### 3. Polling Ğ´Ğ»Ñ Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ñ‹Ñ… Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹
```javascript
// ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ polling Ğ´Ğ»Ñ AI Ñ€Ğ°ÑĞ¿Ğ¾Ğ·Ğ½Ğ°Ğ²Ğ°Ğ½Ğ¸Ñ
async function pollRecognitionStatus(jobId) {
  while (true) {
    const response = await fetch(`/ai/recognize/${jobId}/status`);
    const data = await response.json();
    
    if (data.data.status === 'completed') {
      return data.data.result;
    }
    if (data.data.status === 'failed') {
      throw new Error(data.data.error);
    }
    
    // ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞµĞ¼ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ Ğ² UI
    updateProgress(data.data.progress);
    
    // Ğ–Ğ´Ñ‘Ğ¼ 2 ÑĞµĞºÑƒĞ½Ğ´Ñ‹
    await new Promise(r => setTimeout(r, 2000));
  }
}
```

### 4. ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸ÑÑ‚Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ
- Ğ”Ğ»Ñ Ğ»ÑƒÑ‡ÑˆĞµĞ³Ğ¾ UX Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞ¹Ñ‚Ğµ UI ÑÑ€Ğ°Ğ·Ñƒ, Ğ¾Ñ‚ĞºĞ°Ñ‚Ñ‹Ğ²Ğ°Ñ Ğ¿Ñ€Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞµ

### 5. Swagger UI
Ğ˜Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ°Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ° Ğ¿Ğ¾ Ğ°Ğ´Ñ€ĞµÑÑƒ:
**https://api.granula.raitokyokai.tech/swagger/**

---

## ğŸ§ª Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ

Ğ”Ğ»Ñ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ:
- ĞšĞ°Ñ€Ñ‚Ğ¸Ğ½ĞºĞ¸ Ğ¿Ğ»Ğ°Ğ½Ğ¾Ğ² ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€ Ğ¸Ğ· Ğ¿Ğ°Ğ¿ĞºĞ¸ `/ĞšĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñ‹/`
- Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğ¹ email: `test_{timestamp}@granula.ru`

---

*Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ°ĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ğ° Ğ½Ğ°: 30 Ğ½Ğ¾ÑĞ±Ñ€Ñ 2024*

